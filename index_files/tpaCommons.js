(window.webpackJsonp__wix_thunderbolt_app=window.webpackJsonp__wix_thunderbolt_app||[]).push([[71],{318:function(e,n,t){"use strict";t.r(n),t.d(n,"site",(function(){return l}));var a=t(52),r=t(477),i=t(210);t.d(n,"MasterPageTpaPropsCacheSymbol",(function(){return i.a})),t.d(n,"TpaSrcBuilderSymbol",(function(){return i.c}));var o=t(478),c=t(479);t.d(n,"TpaHandlersManagerSymbol",(function(){return i.b})),t.d(n,"name",(function(){return i.d}));var u=t(394);for(var d in u)["default","site","TpaHandlersManagerSymbol","name","MasterPageTpaPropsCacheSymbol","TpaSrcBuilderSymbol"].indexOf(d)<0&&function(e){t.d(n,e,(function(){return u[e]}))}(d);var l=function(e){e(a.a.AppDidMountHandler).to(r.a),e(i.a).to(o.a),e(i.c).to(c.a)}},394:function(e,n){},447:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var a=t(0),r={buildRuntimeCompId:function(e,n){return e+"_rtby_"+n},isRuntimeCompId:function(e){return e.split("_rtby_").length>1},getOriginCompId:function(e){var n=Object(a.e)(e.split("_rtby_"),2),t=n[0];return n[1]||t}}},477:function(e,n,t){"use strict";t.d(n,"a",(function(){return f}));var a=t(0),r=t(7),i=t(299),o=t(35),c=t(210),u=t(232),d=t(447),l=t(138),s=function(e){if(e.data)try{return JSON.parse(e.data)}catch(e){}return{}},p=["getWixUpgradeUrl","stylesReady","getViewModeInternal","setHelpArticle"],f=Object(r.h)([u.a,o.a,i.d,Object(r.g)(l.a)],(function(e,n,t,r){return{appDidMount:function(){e.addWindowMessageHandler({canHandleEvent:function(e){return!!(e.source&&(n=s(e),n&&["TPA","TPA2"].includes(n.intent)));var n},handleEvent:function(e){return Object(a.b)(this,void 0,void 0,(function(){var i,o,u,l,f;return Object(a.d)(this,(function(g){switch(g.label){case 0:return i=s(e),o=i.type,u=i.callId,l=i.compId,p.includes(o)?[2]:(f=function(e){var n=e.compId;if(!n)return null;if(n.startsWith("tpaWorker_"))return"masterPage";var a=d.a.getOriginCompId(n);return t.getContextIdOfCompId(a)}(i),r&&r.tpa.addMessage({msg:i,compId:l,contextId:f}),f?[4,(v=f,Object(a.b)(void 0,void 0,Promise,(function(){return Object(a.d)(this,(function(e){switch(e.label){case 0:return[4,n(v)];case 1:return[2,e.sent().getAllImplementersOnPageOf(c.b)[0]]}}))})))]:(console.error("TPA handler message caller does not belong to any page",{type:o,callId:u,compId:l}),[2]));case 1:return g.sent().handleMessage(e.source,i).catch((function(e){console.error("TpaHandlerError",o,f,l,e)})),[2]}var v}))}))}})}}}))},478:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var a=t(12),r=t.n(a),i=t(7),o=t(299),c=t(206),u=Object(i.h)([o.b,c.a],(function(e,n){var t={};return{cacheProps:function(n){var a=r.a.omitBy(e.get(n),r.a.isFunction);t[n]=r.a.isEmpty(a)?null:a},getCachedProps:function(e){var a,r,i,o,c=t[e];if(c)return(null===(r=null===(a=n.getCurrentRouteInfo())||void 0===a?void 0:a.dynamicRouteData)||void 0===r?void 0:r.publicData)!==(null===(o=null===(i=n.getPreviousRouterInfo())||void 0===i?void 0:i.dynamicRouteData)||void 0===o?void 0:o.publicData)&&delete c.src,c}}}))},479:function(e,n,t){"use strict";t.d(n,"a",(function(){return I}));var a=t(0),r=t(7),i=t(299),o=t(27),c=t(40),u=t(206),d=t(300),l=t(293),s=t(210),p=t(19),f=t(24),g=t(18),v=t(12),m=t.n(v),b=t(137),y=function(e){var n,t=e.getCurrentConsentPolicy();return(n=t).defaultPolicy&&m.a.every(n.policy)||!e._getConsentPolicyHeader()["consent-policy"]?void 0:decodeURIComponent(e._getConsentPolicyHeader()["consent-policy"])},I=Object(r.h)([i.b,Object(r.f)(o.d,s.d),p.b,f.a,c.a,g.a,u.a,d.a,l.a,Object(r.g)(b.a)],(function(e,n,t,r,i,o,c,u,d,l){var s=n.widgetsClientSpecMapData,p=n.siteRevision,f=n.viewMode,g=n.appSectionParams,v=n.externalBaseUrl,b=n.requestUrl,I=n.extras,h=n.deviceType,O=n.tpaDebugParams,P=n.locale,C=n.timeZone,w=function(){return i?i.location.href:b},R=function(e,n,t){var r,i,o=Boolean(t.tpaPageUri&&!m.a.isNil(n)&&n===t.tpaApplicationId)&&(r=Object(a.e)(w().replace(v,"").split("?"),1)[0].split("/"),(i=r.indexOf(t.tpaPageUri||""))<0||r[i]!==t.tpaPageUri?null:Object(a.e)(r.splice(i)).slice(1));return o?function(e,n){if(0===e.length)return n;var t=e.join("/"),a=new URL(n);return a.pathname+="/"+t,a.href}(o,e):e};return{buildSrc:function(e,n,u,v,b){var j,S,_;void 0===b&&(b={});var D=m.a.merge({tpaInnerRouteConfig:null,extraQueryParams:{},appDefinitionId:""},b),x=u.widgetId,M=u.width,T=u.height,U=u.externalId,N=u.templateId,A=s[x]||{},H=A.applicationId,L=A.appDefinitionId||D.appDefinitionId,B=null===(j=c.getCurrentRouteInfo().dynamicRouteData)||void 0===j?void 0:j.publicData,E=N||e,J=e,W=JSON.stringify(o.getCommonConfig()),k=Object(a.a)(Object(a.a)({instance:t.getAppInstanceByAppDefId(L),pageId:n,compId:E,viewerCompId:J,siteRevision:""+p,viewMode:f,deviceType:h,externalId:U,locale:P,commonConfig:W,tz:C,vsi:d.viewerSessionId,"consent-policy":y(r),currency:I.currency,width:m.a.isNumber(M)?""+M:null,height:m.a.isNumber(T)?""+T:null},function(){if(i){var e=new URL(w()).searchParams.get("appSectionParams");return JSON.parse(decodeURIComponent(e||"{}"))||{}}return g}()),D.extraQueryParams);l&&(k.lang=null===(S=l.currentLanguage)||void 0===S?void 0:S.languageCode,k.dateNumberFormat=null===(_=l.currentLanguage)||void 0===_?void 0:_.locale,m.a.isNil(l.isOriginalLanguage)||(k.isPrimaryLanguage=""+l.isOriginalLanguage)),B&&(k.routerData=JSON.stringify(B)),m.a.entries(O).forEach((function(e){var n=Object(a.e)(e,2),t=n[0],r=n[1];m.a.isNil(r)||(k[t]=r)}));var F=D.tpaInnerRouteConfig?R(v,H,D.tpaInnerRouteConfig):v,Q=new URL(F);return m.a.entries(k).forEach((function(e){var n=Object(a.e)(e,2),t=n[0],r=n[1];m.a.isNil(r)||Q.searchParams.set(t,r)})),Q.href}}}))}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/tpaCommons.82b180ae.chunk.min.js.map